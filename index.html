
<!DOCTYPE html>
<html>
  <body>
    <todo-app></todo-app>

    <script type="module">
    import {html, component, useState} from 'https://unpkg.com/haunted/haunted.js'

       const todoApp = ()=>{
        const [todos, setTodos] =useState([{text: ' First'}]);
        const _addTodo = (e)=>{
        const input = e.currentTarget.previousElementSibling;
        const text= input.value;
        input.value='';
        setTodos(old=>[...old ,{text}])       
        }

        return  html`
        <h1>Todo app</h1>

        <input placeholder='New Todo' />
        <button @click=${_addTodo}>Add Todo</button>

      <ol>
      ${todos.map(
        todo => html`
          <li>${todo.text}

                <button
                        @click=${() =>
                        setTodos([...todos.filter(x => x !== todo)])}>
                        X
                </button>
          </li>
        `,
      )}
    </ol>
    `       
    } 

      customElements.define('todo-app', component(todoApp));
    </script>
  </body>

</html>
